# ブロックの拡張

テンプレートブロックを拡張することは、作者に追加機能を提供するための最良の方法です。

最も一般的な使い方は、実行時にいくつかのタグの中のコンテンツを処理することです。これは [filters](./filters.md) のようなものですが、単一の式に制限されないので、ステロイドのようなものです。

### 新しいブロックの定義

ブロックはプラグインによって定義され、ブロックはブロックディスクリプタに関連付けられた名前のマップです。ブロックディスクリプタは、少なくとも `process` メソッドを含む必要があります。

```js
module.exports = {
    blocks: {
        タグ1: {
            process: function(block) {
                return "こんにちは "+block.body+", How are you?
            }
        }
    }
};
```

処理`は、タグを置き換えるhtmlコンテンツを返す必要があります。this` と HonKit API については [Context and APIs](./api.md) を参照してください。

### ブロックの引数の扱い

ブロックには引数を渡すことができます。

```
{% tag1 "引数1", "引数2", name="Test" %} これはブロックの本体です。
これはブロックの本体です。
{これはブロックの本体です。｝
```

そして、引数は `process` メソッドで簡単にアクセスすることができます。

```js
module.exports = {
    ブロックを作成します。{
        タグ1: {
            process: function(block) {
                // block.args equals ["引数1", "引数2"].
                // block.kwargs equals { "name": "テスト" }.
            }
        }
    }
};
```

### サブブロックの処理

定義されたブロックは異なるサブブロックにパースすることができます。例えば、ソースを考えてみましょう。

```
{% myTag %}
    メインボディ
    {サブブロック1｝
    サブブロック1のボディ
    {サブブロック2 %} 本体
    サブブロック1の本体
{エンドミータグ｝
```
